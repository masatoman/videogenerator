# 要件定義書

## 1. 機能要件

### 1.1 コンテンツ生成
- ギバータイプに適した英語フレーズの生成
- 日本語訳の生成
- 生成されたフレーズの品質チェック
  - 長さ制限（100文字以内）
  - ギバー関連キーワードの含有確認
  - 不適切な表現のフィルタリング

### 1.2 音声合成
- OpenVoiceを使用した自然な英語音声の生成
- 音声品質の確保
  - サンプリングレート：44.1kHz
  - ビット深度：16bit
  - チャンネル：モノラル
- 音声の長さ制御（5-15秒）

### 1.3 画像処理
- Unsplashからの適切な背景画像取得
- 画像の前処理
  - リサイズ（1080x1920）
  - 明度調整（字幕の視認性確保）
  - 画質最適化

### 1.4 動画生成
- ffmpegによる動画合成
- 字幕の追加
  - 英語/日本語の2言語表示
  - フォントサイズと位置の最適化
  - 視認性の確保（背景ぼかし等）
- 出力フォーマット
  - 解像度：1080x1920
  - フレームレート：30fps
  - コーデック：H.264
  - 容量最適化

### 1.5 通知機能
- Slack通知
  - 生成開始/完了の通知
  - エラー発生時の通知
  - 生成された動画ファイルのパス共有

## 2. 非機能要件

### 2.1 性能要件
- 1動画の生成時間：5分以内
- 同時処理数：最大3件
- ディスク使用量：1動画あたり最大100MB

### 2.2 信頼性要件
- システム稼働率：99%
- バックアップ：生成済み動画の7日間保持
- エラー検知と自動リトライ機能

### 2.3 セキュリティ要件
- APIキーの安全な管理
- 一時ファイルの適切な削除
- アクセス制御の実装

### 2.4 保守性要件
- モジュール化された設計
- 詳細なログ記録
- 設定の外部化（.env）
- テストコードの整備

### 2.5 拡張性要件
- 新しい言語モデルへの対応
- 異なる動画フォーマットへの対応
- 複数の音声合成エンジンのサポート 